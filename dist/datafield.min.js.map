{"version":3,"file":"datafield.min.js","sources":["../src/utils.js","../src/filter.js","../src/errors.js","../src/datafield.js"],"sourcesContent":["export function findProp (el, prop) {\n  if (el.hasOwnProperty(prop)) return el[prop]\n  return traverseKeys(el, prop)\n}\n\nexport function randomTakes (len, num, collection = []) {\n  const index = Math.floor(Math.random() * len)\n  if (!collection.includes(index)) collection.push(index)\n  return collection.length === num ? collection : randomTakes(len, num, collection)\n}\n\nfunction traverseKeys (obj, path, fallback) {\n  if (!obj || typeof obj !== 'object') return typeof fallback === 'function' ? fallback() : fallback\n  if (!path) return obj\n\n  let o = Object.assign({}, obj)\n  path = path.split('.')\n\n  for (let i = 0; i < path.length; i++) {\n    if (!o.hasOwnProperty(path[i])) return typeof fallback === 'function' ? fallback() : fallback\n    o = o[path[i]]\n    if (o !== Object(o) && i < path.length - 1) return typeof fallback === 'function' ? fallback() : fallback\n  }\n\n  return o\n}\n\nexport function checkTypes (a, b) {\n  if (typeof a !== typeof b) return false\n  if (typeof a === 'object' && a instanceof Date && b instanceof Date) return true\n  return typeof a === 'number' || typeof a === 'string'\n}\n","import { findProp } from './utils'\r\n\r\nfunction isGreater (el, selector, value) {\r\n  let propValue = findProp(el, selector)\r\n  if (Array.isArray(propValue)) propValue = propValue.length\r\n  if (value instanceof Date) propValue = new Date(propValue)\r\n  return propValue > value\r\n}\r\n\r\nfunction isGreaterOrEq (el, selector, value) {\r\n  let propValue = findProp(el, selector)\r\n  if (Array.isArray(propValue)) propValue = propValue.length\r\n  if (value instanceof Date) propValue = new Date(propValue)\r\n  return propValue >= value\r\n}\r\n\r\nfunction isLess (el, selector, value) {\r\n  let propValue = findProp(el, selector)\r\n  if (Array.isArray(propValue)) propValue = propValue.length\r\n  if (value instanceof Date) propValue = new Date(propValue)\r\n  return propValue < value\r\n}\r\n\r\nfunction isLessOrEq (el, selector, value) {\r\n  let propValue = findProp(el, selector)\r\n  if (Array.isArray(propValue)) propValue = propValue.length\r\n  if (value instanceof Date) propValue = new Date(propValue)\r\n  return propValue <= value\r\n}\r\n\r\nfunction isEq (el, selector, value) {\r\n  let propValue = findProp(el, selector)\r\n  if (Array.isArray(propValue)) propValue = propValue.length\r\n  if (value instanceof Date) propValue = new Date(propValue)\r\n  return value instanceof Date ? propValue.getTime() === value.getTime() : propValue === value\r\n}\r\n\r\nfunction isNotEq (el, selector, value) {\r\n  let propValue = findProp(el, selector)\r\n  if (Array.isArray(propValue)) propValue = propValue.length\r\n  if (value instanceof Date) propValue = new Date(propValue)\r\n  return value instanceof Date ? propValue.getTime() !== value.getTime() : propValue !== value\r\n}\r\n\r\nfunction isLike (el, selector) {\r\n  return Boolean(findProp(el, selector))\r\n}\r\n\r\nexport { isGreater, isGreaterOrEq, isLess, isLessOrEq, isEq, isNotEq, isLike }\r\n","export default function error (code) {\n  switch (code) {\n    case 'NO_CONS':\n      throw new Error('array should be passed into the DataField constructor')\n    case 'NOT_ARRAY':\n      throw new Error('DataField can only accept arrays')\n    case 'RANGE_ARG':\n      throw new Error('DataField range() method accepts 2 arguments of the same type')\n    case 'NO_SEL':\n      throw new Error('DataField selector not specified, use .where(selector)')\n    case 'NO_SEL_OR_VAL':\n      throw new Error('DataField selector or value not specified, use .where(selector) and check method arguments')\n    default:\n      throw new Error('DataField error')\n  }\n}\n","import { findProp, randomTakes, checkTypes } from './utils'\nimport { isGreater, isLess, isLessOrEq, isGreaterOrEq, isEq, isNotEq, isLike } from './filter'\nimport error from './errors'\n\nexport default class DataField {\n  constructor (array = error('NO_CONS'), selector) {\n    if (!Array.isArray(array)) error('NOT_ARRAY')\n    this.data = array.slice(0) // https://jsperf.com/cloning-arrays/3\n    this.caret = 0\n    this.selector = selector\n  }\n\n  exists (prop = this.selector) {\n    const data = this.data.filter(el => findProp(el, prop) !== undefined)\n    return new DataField(data, this.selector)\n  }\n\n  has (prop) {\n    const data = this.data.filter(el => {\n      const value = findProp(el, prop)\n      return Array.isArray(value) ? value.length : value\n    })\n    return new DataField(data, this.selector)\n  }\n\n  take (number = 1) {\n    const data = this.data.slice(this.caret, this.caret + number)\n    this.caret += number\n    return new DataField(data, this.selector)\n  }\n\n  get length () {\n    this.__reset()\n    return this.data.length\n  }\n\n  takeRandom (number = 1) {\n    if (typeof number !== 'number') number = parseInt(String(number))\n    if (isNaN(number)) number = 1\n    number = Math.floor(number)\n    if (number > this.data.length) number = this.data.length\n    const selected = randomTakes(this.data.length, number)\n    const data = this.data.filter((el, i) => selected.includes(i))\n    return new DataField(data, this.selector)\n  }\n\n  where (selector) {\n    this.selector = selector\n    return this\n  }\n\n  isTruthy () {\n    if (!this.selector) error('NO_SEL')\n    const data = this.data.filter(el => isLike(el, this.selector))\n    return new DataField(data, this.selector)\n  }\n\n  isFalsy () {\n    if (!this.selector) error('NO_SEL')\n    const data = this.data.filter(el => !isLike(el, this.selector))\n    return new DataField(data, this.selector)\n  }\n\n  eq (value) {\n    if (!this.selector || value === undefined) error('NO_SEL_OR_VAL')\n    const data = this.data.filter((el) => isEq(el, this.selector, value))\n    return new DataField(data, this.selector)\n  }\n\n  not (value) {\n    if (!this.selector || value === undefined) error('NO_SEL_OR_VAL')\n    const data = this.data.filter((el) => isNotEq(el, this.selector, value))\n    return new DataField(data, this.selector)\n  }\n\n  gt (value) {\n    if (!this.selector || value === undefined) error('NO_SEL_OR_VAL')\n    const data = this.data.filter((el) => isGreater(el, this.selector, value))\n    return new DataField(data, this.selector)\n  }\n\n  lt (value) {\n    if (!this.selector || value === undefined) error('NO_SEL_OR_VAL')\n    const data = this.data.filter((el) => isLess(el, this.selector, value))\n    return new DataField(data, this.selector)\n  }\n\n  gte (value) {\n    if (!this.selector || value === undefined) error('NO_SEL_OR_VAL')\n    const data = this.data.filter((el) => isGreaterOrEq(el, this.selector, value))\n    return new DataField(data, this.selector)\n  }\n\n  lte (value) {\n    if (!this.selector || value === undefined) error('NO_SEL_OR_VAL')\n    const data = this.data.filter((el) => isLessOrEq(el, this.selector, value))\n    return new DataField(data, this.selector)\n  }\n\n  range (from, to) {\n    if (Array.isArray(from) && from.length === 2) {\n      [from, to] = [from[0], from[1]]\n    }\n    if (!checkTypes(from, to)) error('RANGE_ARG')\n    if (!this.selector) error('NO_SEL')\n    const data = this.data\n      .filter((el) => isGreaterOrEq(el, this.selector, from))\n      .filter((el) => isLess(el, this.selector, to))\n    return new DataField(data, this.selector)\n  }\n\n  includes (value) {\n    if (!this.selector) error('NO_SEL')\n    if (value === undefined) return this\n    const data = this.data.filter(el => {\n      const prop = findProp(el, this.selector)\n      return Array.isArray(prop) && prop.includes(value)\n    })\n    return new DataField(data, this.selector)\n  }\n\n  any (config = {}) {\n    if (typeof config !== 'object' || !Object.keys(config).length) return this\n    const data = this.data.filter((el) => this.__checkForAny(el, config))\n    return new DataField(data, this.selector)\n  }\n\n  all (config = {}) {\n    if (typeof config !== 'object' || !Object.keys(config).length) return this\n    const data = this.data.filter((el) => this.__checkForAll(el, config))\n    return new DataField(data, this.selector)\n  }\n\n  sort ({by, order = 'asc', type} = {}) {\n    const prop = this.__findFirstOccurrence(by)\n    if (!by || !prop) return this\n    if (order !== 'desc') order = 'asc'\n    if (!type) type = typeof prop\n    this.selector = by\n    return order === 'asc' ? this.asc(type) : this.desc(type)\n  }\n\n  asc (type) {\n    if (!this.selector) error('NO_SEL')\n    if (!this.data.length) return this\n    let data = []\n    type = type || this.__getType()\n    const prop = this.selector\n    switch (type) {\n      case 'n':\n      case 'num':\n      case 'number':\n        data = this.data.slice().sort((a, b) => findProp(a, prop) - findProp(b, prop))\n        break\n      case 'string':\n      case 'str':\n      case 's':\n        data = this.data.slice().sort((a, b) => String(findProp(a, prop)).localeCompare(String(findProp(b, prop))))\n        break\n      case 'date':\n      case 'd':\n        data = this.data.slice().sort((a, b) => Number(new Date(findProp(a, prop))) - Number(new Date(findProp(b, prop))))\n        break\n      case 'array':\n      case 'arr':\n        data = this.data.slice().sort((a, b) => {\n          const _a = findProp(a, prop)\n          const _b = findProp(b, prop)\n          if (Array.isArray(_a) && Array.isArray(_b)) {\n            return _a.length - _b.length\n          }\n        })\n        break\n      default:\n        return this\n    }\n    return new DataField(data, this.selector)\n  }\n\n  desc (type) {\n    if (!this.selector) error('NO_SEL')\n    if (!this.data.length) return this\n    let data = []\n    type = type || this.__getType()\n    const prop = this.selector\n    switch (type) {\n      case 'num':\n      case 'number':\n        data = this.data.slice().sort((a, b) => findProp(b, prop) - findProp(a, prop))\n        break\n      case 'str':\n      case 'string':\n        data = this.data.slice().sort((a, b) => String(findProp(b, prop)).localeCompare(String(findProp(a, prop))))\n        break\n      case 'date':\n        data = this.data.slice().sort((a, b) => Number(new Date(findProp(b, prop))) - Number(new Date(findProp(a, prop))))\n        break\n      case 'arr':\n      case 'array':\n        data = this.data.slice().sort((a, b) => {\n          const _a = findProp(a, prop)\n          const _b = findProp(b, prop)\n          if (Array.isArray(_a) && Array.isArray(_b)) {\n            return _b.length - _a.length\n          }\n        })\n        break\n      default:\n        return this\n    }\n    return new DataField(data, this.selector)\n  }\n\n  sum (prop, strict = true) {\n    this.__reset()\n    return this.data.reduce((sum, el) => {\n      const value = findProp(el, prop)\n      if (strict) return typeof value === 'number' ? sum + value : sum\n      return !isNaN(value) ? sum + Number(value) : sum\n    }, 0)\n  }\n\n  avg (prop, strict = true) {\n    this.__reset()\n    let sum = 0\n    let count = 0\n    this.data.forEach(el => {\n      const value = findProp(el, prop)\n      if (strict) {\n        if (typeof value === 'number') {\n          count++\n          sum += value\n        }\n      } else {\n        if (!isNaN(value)) {\n          count++\n          sum += Number(value)\n        }\n      }\n    })\n    return count ? sum / count : 0\n  }\n\n  median (prop, strict = true) {\n    this.__reset()\n    const values = []\n    this.data.forEach(el => {\n      const value = findProp(el, prop)\n      if (strict) {\n        if (typeof value === 'number') {\n          values.push(value)\n        }\n      } else {\n        if (!isNaN(value)) {\n          values.push(Number(value))\n        }\n      }\n    })\n\n    if (values.length === 0) {\n      return 0\n    } else if (values.length === 1) {\n      return values[0]\n    }\n\n    values.sort((a, b) => a - b)\n    const medianItem = Math.floor(values.length / 2)\n    return values.length % 2 ? values[medianItem] : (values[medianItem - 1] + values[medianItem]) / 2\n  }\n\n  values () {\n    this.__reset()\n    return this.data.slice(0) // https://jsperf.com/cloning-arrays/3\n  }\n\n  toArray () {\n    return this.values()\n  }\n\n  __reset () {\n    this.selector = ''\n  }\n\n  __getType (selector = this.selector) {\n    if (!selector) return\n    for (let i = 0; i < this.data.length; i++) {\n      const prop = findProp(this.data[i], selector)\n      if (prop) {\n        if (Array.isArray(prop)) return 'array'\n        return typeof prop\n      }\n    }\n  }\n\n  __findFirstOccurrence (selector) {\n    if (!selector) return\n    for (let i = 0; i < this.data.length; i++) {\n      const prop = findProp(this.data[i], selector)\n      if (prop) {\n        return prop\n      }\n    }\n  }\n\n  __checkForAny (el, config) {\n    const props = Object.keys(config)\n    for (let prop of props) {\n      switch (prop) {\n        case 'gt':\n          if (isGreater(el, this.selector, config[prop])) return true\n          break\n        case 'gte':\n          if (isGreaterOrEq(el, this.selector, config[prop])) return true\n          break\n        case 'lt':\n          if (isLess(el, this.selector, config[prop])) return true\n          break\n        case 'lte':\n          if (isLessOrEq(el, this.selector, config[prop])) return true\n          break\n        case 'eq':\n          if (isEq(el, this.selector, config[prop])) return true\n          break\n        case 'not':\n          if (isNotEq(el, this.selector, config[prop])) return true\n          break\n        case 'is':\n          if (config[prop] === isLike(el, this.selector)) return true\n          break\n        case 'range':\n          if (\n            Array.isArray(config[prop]) && config[prop].length === 2 &&\n            isGreaterOrEq(el, this.selector, config[prop][0]) &&\n            isLess(el, this.selector, config[prop][1])) return true\n          break\n        default:\n      }\n    }\n  }\n\n  __checkForAll (el, config) {\n    const props = Object.keys(config)\n    for (let prop of props) {\n      switch (prop) {\n        case 'gt':\n          if (!isGreater(el, this.selector, config[prop])) return\n          break\n        case 'gte':\n          if (!isGreaterOrEq(el, this.selector, config[prop])) return\n          break\n        case 'lt':\n          if (!isLess(el, this.selector, config[prop])) return\n          break\n        case 'lte':\n          if (!isLessOrEq(el, this.selector, config[prop])) return\n          break\n        case 'eq':\n          if (!isEq(el, this.selector, config[prop])) return\n          break\n        case 'not':\n          if (!isNotEq(el, this.selector, config[prop])) return\n          break\n        case 'is':\n          if (config[prop] !== isLike(el, this.selector)) return\n          break\n        case 'range':\n          if (\n            Array.isArray(config[prop]) && config[prop].length === 2 &&\n            !(isGreaterOrEq(el, this.selector, config[prop][0]) &&\n              isLess(el, this.selector, config[prop][1]))) return\n          break\n        default:\n      }\n    }\n    return true\n  }\n}\n"],"names":["findProp","el","prop","hasOwnProperty","obj","path","fallback","let","o","Object","assign","split","i","length","traverseKeys","isGreater","selector","value","propValue","Array","isArray","Date","isGreaterOrEq","isLess","isLessOrEq","isEq","getTime","isNotEq","isLike","Boolean","error","code","Error","DataField","array","this","data","slice","caret","exists","filter","undefined","has","const","take","number","prototypeAccessors","__reset","takeRandom","parseInt","String","isNaN","Math","floor","selected","randomTakes","len","num","collection","index","random","includes","push","where","isTruthy","isFalsy","eq","not","gt","lt","gte","lte","range","from","to","a","b","any","config","keys","__checkForAny","all","__checkForAll","sort","ref","__findFirstOccurrence","by","order","type","asc","desc","__getType","localeCompare","Number","_a","_b","sum","strict","reduce","avg","count","forEach","median","values","medianItem","toArray"],"mappings":"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"}