!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.DataField=e()}(this,function(){"use strict";function t(t,e){return t.hasOwnProperty(e)?t[e]:function(t,e,r){if(!t||"object"!=typeof t)return"function"==typeof r?r():r;if(!e)return t;var n=Object.assign({},t);e=e.split(".");for(var i=0;i<e.length;i++){if(!n.hasOwnProperty(e[i]))return"function"==typeof r?r():r;if((n=n[e[i]])!==Object(n)&&i<e.length-1)return"function"==typeof r?r():r}return n}(t,e)}function e(t){switch(t){case"NO_CONS":throw new Error("array should be passed into the DataField constructor");case"NOT_ARRAY":throw new Error("DataField can only accept arrays");case"RANGE_ARG":throw new Error("DataField range() method accepts 2 arguments of the same type");case"NO_SEL":throw new Error("DataField selector not specified, use .where(selector)");default:throw new Error("DataField error")}}var r=function(t,r){void 0===t&&(t=e("NO_CONS")),Array.isArray(t)||e("NOT_ARRAY"),this.data=t.slice(0),this.caret=0,this.selector=r},n={length:{configurable:!0}};return r.prototype.exists=function(e){var n=this.data.filter(function(r){return void 0!==t(r,e)});return new r(n,this.selector)},r.prototype.has=function(e){var n=this.data.filter(function(r){var n=t(r,e);return Array.isArray(n)?n.length:n});return new r(n,this.selector)},r.prototype.take=function(t){void 0===t&&(t=1);var e=new r(this.data.slice(this.caret,this.caret+t),this.selector);return this.caret+=t,e},n.length.get=function(){return this.__reset(),this.data.length},r.prototype.takeRandom=function(t){void 0===t&&(t=1),"number"!=typeof t&&(t=parseInt(String(t))),isNaN(t)&&(t=1),(t=Math.floor(t))>this.data.length&&(t=this.data.length);var e=function t(e,r,n){void 0===n&&(n=[]);var i=Math.floor(Math.random()*e);return n.includes(i)||n.push(i),n.length===r?n:t(e,r,n)}(this.data.length,t),n=this.data.filter(function(t,r){return e.includes(r)});return new r(n,this.selector)},r.prototype.where=function(t){return this.selector=t,this},r.prototype.isTruthy=function(){var n=this;this.selector||e("NO_SEL");var i=this.data.filter(function(e){return t(e,n.selector)});return new r(i)},r.prototype.isFalsy=function(){var n=this;this.selector||e("NO_SEL");var i=this.data.filter(function(e){return!t(e,n.selector)});return new r(i)},r.prototype.eq=function(e){var n,i=this;return this.selector?e instanceof Date?(n=this.data.filter(function(r){return new Date(t(r,i.selector)).getTime()===e.getTime()}),new r(n,this.selector)):(n=this.data.filter(function(r){var n=t(r,i.selector);return Array.isArray(n)&&(n=n.length),n===e}),new r(n,this.selector)):this},r.prototype.not=function(e){var n,i=this;return this.selector?e instanceof Date?(n=this.data.filter(function(r){return new Date(t(r,i.selector)).getTime()!==e.getTime()}),new r(n,this.selector)):(n=this.data.filter(function(r){var n=t(r,i.selector);return Array.isArray(n)&&(n=n.length),n!==e}),new r(n,this.selector)):this},r.prototype.gt=function(e){var n,i=this;return this.selector&&void 0!==e?e instanceof Date?(n=this.data.filter(function(r){return new Date(t(r,i.selector))>e}),new r(n,this.selector)):(n=this.data.filter(function(r){var n=t(r,i.selector);return Array.isArray(n)&&(n=n.length),n>e}),new r(n,this.selector)):this},r.prototype.lt=function(e){var n,i=this;return this.selector&&void 0!==e?e instanceof Date?(n=this.data.filter(function(r){return new Date(t(r,i.selector))<e}),new r(n,this.selector)):(n=this.data.filter(function(r){var n=t(r,i.selector);return Array.isArray(n)&&(n=n.length),n<e}),new r(n,this.selector)):this},r.prototype.gte=function(e){var n,i=this;return this.selector&&void 0!==e?e instanceof Date?(n=this.data.filter(function(r){return new Date(t(r,i.selector))>=e}),new r(n,this.selector)):(n=this.data.filter(function(r){var n=t(r,i.selector);return Array.isArray(n)&&(n=n.length),n>=e}),new r(n,this.selector)):this},r.prototype.lte=function(e){var n,i=this;return this.selector&&void 0!==e?e instanceof Date?(n=this.data.filter(function(r){return new Date(t(r,i.selector))<=e}),new r(n,this.selector)):(n=this.data.filter(function(r){var n=t(r,i.selector);return Array.isArray(n)&&(n=n.length),n<=e}),new r(n,this.selector)):this},r.prototype.range=function(n,i){var s,a,o,c=this;return typeof(s=n)==typeof(a=i)&&("object"==typeof s&&s instanceof Date&&a instanceof Date||"number"==typeof s||"string"==typeof s)||e("RANGE_ARG"),this.selector?n instanceof Date?(o=this.data.filter(function(e){var r=t(e,c.selector);return new Date(r)>=n&&new Date(r)<i}),new r(o,this.selector)):(o=this.data.filter(function(e){var r=t(e,c.selector);return Array.isArray(r)?r.length>=n&&r.length<i:r>=n&&r<i}),new r(o,this.selector)):this},r.prototype.includes=function(n){var i=this;if(this.selector||e("NO_SEL"),void 0===n)return this;var s=this.data.filter(function(e){var r=t(e,i.selector);return Array.isArray(r)&&r.includes(n)});return new r(s)},r.prototype.sort=function(t){void 0===t&&(t={});var e=t.by,r=t.order;void 0===r&&(r="asc");var n=t.type,i=this.__findFirstOccurrence(e);return e&&i?("desc"!==r&&(r="asc"),n||(n=typeof i),this.selector=e,"asc"===r?this.asc(n):this.desc(n)):this},r.prototype.asc=function(n){if(this.selector||e("NO_SEL"),!this.data.length)return this;var i=[];n=n||this.__getType();var s=this.selector;switch(n){case"n":case"num":case"number":i=this.data.slice().sort(function(e,r){return t(e,s)-t(r,s)});break;case"string":case"str":case"s":i=this.data.slice().sort(function(e,r){return String(t(e,s)).localeCompare(String(t(r,s)))});break;case"date":case"d":i=this.data.slice().sort(function(e,r){return Number(new Date(t(e,s)))-Number(new Date(t(r,s)))});break;case"array":case"arr":i=this.data.slice().sort(function(e,r){var n=t(e,s),i=t(r,s);if(Array.isArray(n)&&Array.isArray(i))return n.length-i.length});break;default:return this}return new r(i,this.selector)},r.prototype.desc=function(n){if(this.selector||e("NO_SEL"),!this.data.length)return this;var i=[];n=n||this.__getType();var s=this.selector;switch(n){case"n":case"num":case"number":i=this.data.slice().sort(function(e,r){return t(r,s)-t(e,s)});break;case"string":case"str":case"s":i=this.data.slice().sort(function(e,r){return String(t(r,s)).localeCompare(String(t(e,s)))});break;case"date":case"d":i=this.data.slice().sort(function(e,r){return Number(new Date(t(r,s)))-Number(new Date(t(e,s)))});break;case"array":case"arr":i=this.data.slice().sort(function(e,r){var n=t(e,s),i=t(r,s);if(Array.isArray(n)&&Array.isArray(i))return i.length-n.length});break;default:return this}return new r(i,this.selector)},r.prototype.sum=function(e,r){return void 0===r&&(r=!0),this.__reset(),this.data.reduce(function(n,i){var s=t(i,e);return r?"number"==typeof s?n+s:n:isNaN(s)?n:n+Number(s)},0)},r.prototype.avg=function(e,r){void 0===r&&(r=!0),this.__reset();var n=0,i=0;return this.data.forEach(function(s){var a=t(s,e);r?"number"==typeof a&&(i++,n+=a):isNaN(a)||(i++,n+=Number(a))}),i?n/i:0},r.prototype.median=function(e,r){void 0===r&&(r=!0),this.__reset();var n=[];if(this.data.forEach(function(i){var s=t(i,e);r?"number"==typeof s&&n.push(s):isNaN(s)||n.push(Number(s))}),0===n.length)return 0;if(1===n.length)return n[0];n.sort(function(t,e){return t-e});var i=Math.floor(n.length/2);return n.length%2?n[i]:(n[i-1]+n[i])/2},r.prototype.values=function(){return this.__reset(),this.data.slice(0)},r.prototype.toArray=function(){return this.values()},r.prototype.__reset=function(){this.selector=""},r.prototype.__getType=function(e){if(void 0===e&&(e=this.selector),e)for(var r=0;r<this.data.length;r++){var n=t(this.data[r],e);if(n)return Array.isArray(n)?"array":typeof n}},r.prototype.__findFirstOccurrence=function(e){if(e)for(var r=0;r<this.data.length;r++){var n=t(this.data[r],e);if(n)return n}},Object.defineProperties(r.prototype,n),r});
//# sourceMappingURL=index.js.map
