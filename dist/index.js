!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.lib=e()}(this,function(){"use strict";function t(t,e){return t.hasOwnProperty(e)?t[e]:function(t,e,r){if(!t||"object"!=typeof t)return"function"==typeof r?r():r;if(!e)return t;var n=Object.assign({},t);e=e.split(".");for(var i=0;i<e.length;i++){if(!n.hasOwnProperty(e[i]))return"function"==typeof r?r():r;if((n=n[e[i]])!==Object(n)&&i<e.length-1)return"function"==typeof r?r():r}return n}(t,e)}var e=function(t){void 0===t&&(t=[]),this.data=t,this.caret=0,this.selector=""};return e.prototype.exists=function(r){var n=this.data.filter(function(e){return void 0!==t(e,r)});return new e(n)},e.prototype.has=function(r){var n=this.data.filter(function(e){var n=t(e,r);return Array.isArray(n)?n.length:n});return new e(n)},e.prototype.take=function(t){void 0===t&&(t=1);var r=new e(this.data.slice(this.caret,this.caret+t));return this.caret+=t,r},e.prototype.length=function(){return this.__reset(),this.data.length},e.prototype.takeRandom=function(t){void 0===t&&(t=1),"number"!=typeof t&&(t=parseInt(String(t))),isNaN(t)&&(t=1),(t=Math.floor(t))>this.data.length&&(t=this.data.length);var r=function t(e,r,n){void 0===n&&(n=[]);var i=Math.floor(Math.random()*e);return n.includes(i)||n.push(i),n.length===r?n:t(e,r,n)}(this.data.length,t),n=this.data.filter(function(t,e){return r.includes(e)});return new e(n)},e.prototype.where=function(t){return this.selector=t,this},e.prototype.eq=function(r){var n,i=this;return this.selector?r instanceof Date?(n=this.data.filter(function(e){return new Date(t(e,i.selector)).getTime()===r.getTime()}),new e(n)):(n=this.data.filter(function(e){return t(e,i.selector)===r}),new e(n)):this},e.prototype.not=function(r){var n,i=this;return this.selector?r instanceof Date?(n=this.data.filter(function(e){return new Date(t(e,i.selector)).getTime()!==r.getTime()}),new e(n)):(n=this.data.filter(function(e){return t(e,i.selector)!==r}),new e(n)):this},e.prototype.gt=function(r){var n,i=this;return this.selector&&void 0!==r?r instanceof Date?(n=this.data.filter(function(e){return new Date(t(e,i.selector))>r}),new e(n)):(n=this.data.filter(function(e){return t(e,i.selector)>r}),new e(n)):this},e.prototype.lt=function(r){var n,i=this;return this.selector&&void 0!==r?r instanceof Date?(n=this.data.filter(function(e){return new Date(t(e,i.selector))<r}),new e(n)):(n=this.data.filter(function(e){return t(e,i.selector)<r}),new e(n)):this},e.prototype.gte=function(r){var n,i=this;return this.selector&&void 0!==r?r instanceof Date?(n=this.data.filter(function(e){return new Date(t(e,i.selector))>=r}),new e(n)):(n=this.data.filter(function(e){return t(e,i.selector)>=r}),new e(n)):this},e.prototype.lte=function(r){var n,i=this;return this.selector&&void 0!==r?r instanceof Date?(n=this.data.filter(function(e){return new Date(t(e,i.selector))<=r}),new e(n)):(n=this.data.filter(function(e){return t(e,i.selector)<=r}),new e(n)):this},e.prototype.range=function(r,n){var i,o,s,a=this;if(typeof(i=r)!=typeof(o=n)||!("object"==typeof i&&i instanceof Date&&o instanceof Date||"number"==typeof i||"string"==typeof i))throw new Error("bad arguments");return this.selector?r instanceof Date?(s=this.data.filter(function(e){var i=t(e,a.selector);return new Date(i)>=r&&new Date(i)<n}),new e(s)):(s=this.data.filter(function(e){var i=t(e,a.selector);return i>=r&&i<n}),new e(s)):this},e.prototype.sort=function(e){void 0===e&&(e={});var r=e.by,n=e.order;void 0===n&&(n="asc");var i=e.type,o=t(this.data[0],r);return r&&o?("desc"!==n&&(n="asc"),i||(i=typeof o),this.selector=r,"asc"===n?this.asc(i):this.desc(i)):this},e.prototype.asc=function(r){if(this.selector&&this.data.length){var n=[];r=r||typeof t(this.data[0],this.selector);var i=this.selector;switch(r){case"n":case"num":case"number":n=this.data.slice().sort(function(e,r){return t(e,i)-t(r,i)});break;case"string":case"str":case"s":n=this.data.slice().sort(function(e,r){return String(t(e,i)).localeCompare(String(t(r,i)))});break;case"date":case"d":n=this.data.slice().sort(function(e,r){return Number(new Date(t(e,i)))-Number(new Date(t(r,i)))});break;default:return this}return new e(n)}return this},e.prototype.desc=function(r){if(this.selector&&this.data.length){var n=[];r=r||typeof t(this.data[0],this.selector);var i=this.selector;switch(r){case"n":case"num":case"number":n=this.data.slice().sort(function(e,r){return t(r,i)-t(e,i)});break;case"string":case"str":case"s":n=this.data.slice().sort(function(e,r){return String(t(r,i)).localeCompare(String(t(e,i)))});break;case"date":case"d":n=this.data.slice().sort(function(e,r){return Number(new Date(t(r,i)))-Number(new Date(t(e,i)))});break;default:return this}return new e(n)}return this},e.prototype.sum=function(e,r){return void 0===r&&(r=!0),this.__reset(),this.data.reduce(function(n,i){var o=t(i,e);return r?"number"==typeof o?n+o:n:isNaN(o)?n:n+Number(o)},0)},e.prototype.avg=function(e,r){void 0===r&&(r=!0),this.__reset();var n=0,i=0;return this.data.forEach(function(o){var s=t(o,e);r?"number"==typeof s&&(i++,n+=s):isNaN(s)||(i++,n+=Number(s))}),i?n/i:0},e.prototype.median=function(e,r){void 0===r&&(r=!0),this.__reset();var n=[];if(this.data.forEach(function(i){var o=t(i,e);r?"number"==typeof o&&n.push(o):isNaN(o)||n.push(Number(o))}),0===n.length)return 0;if(1===n.length)return n[0];n.sort(function(t,e){return t-e});var i=Math.floor(n.length/2);return n.length%2?n[i]:(n[i-1]+n[i])/2},e.prototype.values=function(){return this.__reset(),this.data},e.prototype.__reset=function(){this.selector=""},e});
//# sourceMappingURL=index.js.map
