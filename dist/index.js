!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.DataField=e()}(this,function(){"use strict";var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},n=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function r(e,n){return e.hasOwnProperty(n)?e[n]:function(e,n,r){if(!e||"object"!==(void 0===e?"undefined":t(e)))return"function"==typeof r?r():r;if(!n)return e;var i=Object.assign({},e);n=n.split(".");for(var a=0;a<n.length;a++){if(!i.hasOwnProperty(n[a]))return"function"==typeof r?r():r;if((i=i[n[a]])!==Object(i)&&a<n.length-1)return"function"==typeof r?r():r}return i}(e,n)}return function(){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e(this,t),this.data=n,this.caret=0,this.selector=""}return n(t,[{key:"exists",value:function(e){return new t(this.data.filter(function(t){return void 0!==r(t,e)}))}},{key:"has",value:function(e){return new t(this.data.filter(function(t){var n=r(t,e);return Array.isArray(n)?n.length:n}))}},{key:"take",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=new t(this.data.slice(this.caret,this.caret+e));return this.caret+=e,n}},{key:"length",value:function(){return this.data.length}},{key:"takeRandom",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;"number"!=typeof e&&(e=parseInt(String(e))),(e=Math.floor(e))>this.data.length&&(e=this.data.length);var n=function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=Math.floor(Math.random()*e);return r.includes(i)||r.push(i),r.length===n?r:t(e,n,r)}(this.data.length,e);return new t(this.data.filter(function(t,e){return n.includes(e)}))}},{key:"select",value:function(t){return this.selector=t,this}},{key:"eq",value:function(e){var n=this;return this.selector?new t(this.data.filter(function(t){return r(t,n.selector)===e})):this}},{key:"not",value:function(e){var n=this;return this.selector?new t(this.data.filter(function(t){return r(t,n.selector)!==e})):this}},{key:"gt",value:function(e){var n=this;return this.selector&&void 0!==e?new t(this.data.filter(function(t){return r(t,n.selector)>e})):this}},{key:"lt",value:function(e){var n=this;return this.selector&&void 0!==e?new t(this.data.filter(function(t){return r(t,n.selector)<e})):this}},{key:"gte",value:function(e){var n=this;return this.selector&&void 0!==e?new t(this.data.filter(function(t){return r(t,n.selector)>=e})):this}},{key:"lte",value:function(e){var n=this;return this.selector&&void 0!==e?new t(this.data.filter(function(t){return r(t,n.selector)<=e})):this}},{key:"asc",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"string";if(e&&this.data.length){var i=[];switch(n){case"num":case"number":i=this.data.slice().sort(function(t,n){return r(t,e)-r(n,e)});break;case"string":case"str":default:i=this.data.slice().sort(function(t,n){return r(t,e).localeCompare(r(n,e))})}return new t(i)}return this}},{key:"desc",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"string";if(e&&this.data.length){var i=[];switch(n){case"num":case"number":i=this.data.slice().sort(function(t,n){return r(n,e)-r(t,e)});break;case"string":case"str":default:i=this.data.slice().sort(function(t,n){return r(n,e).localeCompare(r(t,e))})}return new t(i)}return this}},{key:"sum",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.data.reduce(function(n,i){var a=r(i,t);return e?"number"==typeof a?n+a:n:isNaN(a)?n:n+Number(a)},0)}},{key:"avg",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=0,i=0;return this.data.forEach(function(a){var u=r(a,t);e?"number"==typeof u&&(i++,n+=u):isNaN(u)||(i++,n+=Number(u))}),i?n/i:0}},{key:"median",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=[];if(this.data.forEach(function(i){var a=r(i,t);e?"number"==typeof a&&n.push(a):isNaN(a)||n.push(Number(a))}),0===n.length)return 0;if(1===n.length)return n[0];n.sort(function(t,e){return t-e});var i=Math.floor(n.length/2);return n.length%2?n[i]:(n[i-1]+n[i])/2}},{key:"values",value:function(){return this.data}}]),t}()});
