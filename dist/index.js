!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.lib=e()}(this,function(){"use strict";function t(t,e){return t.hasOwnProperty(e)?t[e]:function(t,e,r){if(!t||"object"!=typeof t)return"function"==typeof r?r():r;if(!e)return t;var n=Object.assign({},t);e=e.split(".");for(var i=0;i<e.length;i++){if(!n.hasOwnProperty(e[i]))return"function"==typeof r?r():r;if((n=n[e[i]])!==Object(n)&&i<e.length-1)return"function"==typeof r?r():r}return n}(t,e)}var e=function(t){void 0===t&&(t=[]),this.data=t,this.caret=0,this.selector="",this.fieldType="",this.types=["number","num","n","date","d","string","str","s"]};return e.prototype.exists=function(r){var n=this.data.filter(function(e){return void 0!==t(e,r)});return new e(n)},e.prototype.has=function(r){var n=this.data.filter(function(e){var n=t(e,r);return Array.isArray(n)?n.length:n});return new e(n)},e.prototype.take=function(t){void 0===t&&(t=1);var r=new e(this.data.slice(this.caret,this.caret+t));return this.caret+=t,r},e.prototype.length=function(){return this.reset(),this.data.length},e.prototype.takeRandom=function(t){void 0===t&&(t=1),"number"!=typeof t&&(t=parseInt(String(t))),isNaN(t)&&(t=1),(t=Math.floor(t))>this.data.length&&(t=this.data.length);var r=function t(e,r,n){void 0===n&&(n=[]);var i=Math.floor(Math.random()*e);return n.includes(i)||n.push(i),n.length===r?n:t(e,r,n)}(this.data.length,t),n=this.data.filter(function(t,e){return r.includes(e)});return new e(n)},e.prototype.where=function(t){return this.selector=t,this},e.prototype.type=function(t){return void 0===t&&(t="string"),this.fieldType=this.types.includes(t)?t:"string",this},e.prototype.eq=function(r){var n,i=this;return this.selector?["d","date"].includes(this.fieldType)?(r=new Date(r),n=this.data.filter(function(e){return t(e,i.selector)===r}),new e(n)):(n=this.data.filter(function(e){return t(e,i.selector)===r}),new e(n)):this},e.prototype.not=function(r){var n,i=this;return this.selector?["d","date"].includes(this.fieldType)?(r=new Date(r),n=this.data.filter(function(e){return t(e,i.selector)!==r}),new e(n)):(n=this.data.filter(function(e){return t(e,i.selector)!==r}),new e(n)):this},e.prototype.gt=function(r){var n,i=this;return this.selector&&void 0!==r?["d","date"].includes(this.fieldType)?(r=new Date(r),n=this.data.filter(function(e){return t(e,i.selector)>r}),new e(n)):(n=this.data.filter(function(e){return t(e,i.selector)>r}),new e(n)):this},e.prototype.lt=function(r){var n,i=this;return this.selector&&void 0!==r?["d","date"].includes(this.fieldType)?(r=new Date(r),n=this.data.filter(function(e){return t(e,i.selector)<r}),new e(n)):(n=this.data.filter(function(e){return t(e,i.selector)<r}),new e(n)):this},e.prototype.gte=function(r){var n,i=this;return this.selector&&void 0!==r?["d","date"].includes(this.fieldType)?(r=new Date(r),n=this.data.filter(function(e){return t(e,i.selector)>=r}),new e(n)):(n=this.data.filter(function(e){return t(e,i.selector)>=r}),new e(n)):this},e.prototype.lte=function(r){var n,i=this;return this.selector&&void 0!==r?["d","date"].includes(this.fieldType)?(r=new Date(r),n=this.data.filter(function(e){return t(e,i.selector)<=r}),new e(n)):(n=this.data.filter(function(e){return t(e,i.selector)<=r}),new e(n)):this},e.prototype.range=function(r,n){var i,s,o,a=this;if(typeof(i=r)!=typeof(s=n)||!("object"==typeof i&&i instanceof Date&&s instanceof Date||"number"==typeof i||"string"==typeof i))throw new Error("bad arguments");return this.selector?(o=this.data.filter(function(e){var i=t(e,a.selector);return i>=r&&i<n}),new e(o)):this},e.prototype.sort=function(e){void 0===e&&(e={});var r=e.by,n=e.order;void 0===n&&(n="asc");var i=e.type,s=t(this.data[0],r);return r&&s?("desc"!==n&&(n="asc"),i||(i=typeof s),this.selector=r,this.fieldType=i,"asc"===n?this.asc():this.desc()):this},e.prototype.asc=function(){if(this.selector&&this.data.length){var r=[],n=this.fieldType||typeof t(this.data[0],this.selector),i=this.selector;switch(n){case"n":case"num":case"number":r=this.data.slice().sort(function(e,r){return t(e,i)-t(r,i)});break;case"string":case"str":case"s":r=this.data.slice().sort(function(e,r){return String(t(e,i)).localeCompare(String(t(r,i)))});break;case"date":case"d":r=this.data.slice().sort(function(e,r){return Number(new Date(t(e,i)))-Number(new Date(t(r,i)))});break;default:return this}return new e(r)}return this},e.prototype.desc=function(){if(this.selector&&this.data.length){var r=[],n=this.fieldType||typeof t(this.data[0],this.selector),i=this.selector;switch(n){case"n":case"num":case"number":r=this.data.slice().sort(function(e,r){return t(r,i)-t(e,i)});break;case"string":case"str":case"s":r=this.data.slice().sort(function(e,r){return String(t(r,i)).localeCompare(String(t(e,i)))});break;case"date":case"d":r=this.data.slice().sort(function(e,r){return Number(new Date(t(r,i)))-Number(new Date(t(e,i)))});break;default:return this}return new e(r)}return this},e.prototype.sum=function(e,r){return void 0===r&&(r=!0),this.reset(),this.data.reduce(function(n,i){var s=t(i,e);return r?"number"==typeof s?n+s:n:isNaN(s)?n:n+Number(s)},0)},e.prototype.avg=function(e,r){void 0===r&&(r=!0),this.reset();var n=0,i=0;return this.data.forEach(function(s){var o=t(s,e);r?"number"==typeof o&&(i++,n+=o):isNaN(o)||(i++,n+=Number(o))}),i?n/i:0},e.prototype.median=function(e,r){void 0===r&&(r=!0),this.reset();var n=[];if(this.data.forEach(function(i){var s=t(i,e);r?"number"==typeof s&&n.push(s):isNaN(s)||n.push(Number(s))}),0===n.length)return 0;if(1===n.length)return n[0];n.sort(function(t,e){return t-e});var i=Math.floor(n.length/2);return n.length%2?n[i]:(n[i-1]+n[i])/2},e.prototype.values=function(){return this.reset(),this.data},e.prototype.reset=function(){this.fieldType="",this.selector=""},e});
//# sourceMappingURL=index.js.map
