!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.DataField=e()}(this,function(){"use strict";function t(t,e){return t.hasOwnProperty(e)?t[e]:function(t,e,r){if(!t||"object"!=typeof t)return"function"==typeof r?r():r;if(!e)return t;var n=Object.assign({},t);e=e.split(".");for(var i=0;i<e.length;i++){if(!n.hasOwnProperty(e[i]))return"function"==typeof r?r():r;if((n=n[e[i]])!==Object(n)&&i<e.length-1)return"function"==typeof r?r():r}return n}(t,e)}function e(e,r,n){var i=t(e,r);return Array.isArray(i)&&(i=i.length),n instanceof Date&&(i=new Date(i)),i>n}function r(e,r,n){var i=t(e,r);return Array.isArray(i)&&(i=i.length),n instanceof Date&&(i=new Date(i)),i>=n}function n(e,r,n){var i=t(e,r);return Array.isArray(i)&&(i=i.length),n instanceof Date&&(i=new Date(i)),i<n}function i(e,r,n){var i=t(e,r);return Array.isArray(i)&&(i=i.length),n instanceof Date&&(i=new Date(i)),i<=n}function s(e,r,n){var i=t(e,r);return Array.isArray(i)&&(i=i.length),n instanceof Date&&(i=new Date(i)),n instanceof Date?i.getTime()===n.getTime():i===n}function a(e,r,n){var i=t(e,r);return Array.isArray(i)&&(i=i.length),n instanceof Date&&(i=new Date(i)),n instanceof Date?i.getTime()!==n.getTime():i!==n}function o(e,r){return Boolean(t(e,r))}function c(t){switch(t){case"NO_CONS":throw new Error("array should be passed into the DataField constructor");case"NOT_ARRAY":throw new Error("DataField can only accept arrays");case"RANGE_ARG":throw new Error("DataField range() method accepts 2 arguments of the same type");case"NO_SEL":throw new Error("DataField selector not specified, use .where(selector)");case"NO_SEL_OR_VAL":throw new Error("DataField selector or value not specified, use .where(selector) and check method arguments");default:throw new Error("DataField error")}}var u=function(t,e){void 0===t&&(t=c("NO_CONS")),Array.isArray(t)||c("NOT_ARRAY"),this.data=t.slice(0),this.caret=0,this.selector=e},h={length:{configurable:!0}};return u.prototype.exists=function(e){void 0===e&&(e=this.selector);var r=this.data.filter(function(r){return void 0!==t(r,e)});return new u(r,this.selector)},u.prototype.has=function(e){var r=this.data.filter(function(r){var n=t(r,e);return Array.isArray(n)?n.length:n});return new u(r,this.selector)},u.prototype.take=function(t){void 0===t&&(t=1);var e=this.data.slice(this.caret,this.caret+t);return this.caret+=t,new u(e,this.selector)},h.length.get=function(){return this.__reset(),this.data.length},u.prototype.takeRandom=function(t){void 0===t&&(t=1),"number"!=typeof t&&(t=parseInt(String(t))),isNaN(t)&&(t=1),(t=Math.floor(t))>this.data.length&&(t=this.data.length);var e=function t(e,r,n){void 0===n&&(n=[]);var i=Math.floor(Math.random()*e);return n.includes(i)||n.push(i),n.length===r?n:t(e,r,n)}(this.data.length,t),r=this.data.filter(function(t,r){return e.includes(r)});return new u(r,this.selector)},u.prototype.where=function(t){return this.selector=t,this},u.prototype.isTruthy=function(){var t=this;this.selector||c("NO_SEL");var e=this.data.filter(function(e){return o(e,t.selector)});return new u(e,this.selector)},u.prototype.isFalsy=function(){var t=this;this.selector||c("NO_SEL");var e=this.data.filter(function(e){return!o(e,t.selector)});return new u(e,this.selector)},u.prototype.eq=function(t){var e=this;this.selector&&void 0!==t||c("NO_SEL_OR_VAL");var r=this.data.filter(function(r){return s(r,e.selector,t)});return new u(r,this.selector)},u.prototype.not=function(t){var e=this;this.selector&&void 0!==t||c("NO_SEL_OR_VAL");var r=this.data.filter(function(r){return a(r,e.selector,t)});return new u(r,this.selector)},u.prototype.gt=function(t){var r=this;this.selector&&void 0!==t||c("NO_SEL_OR_VAL");var n=this.data.filter(function(n){return e(n,r.selector,t)});return new u(n,this.selector)},u.prototype.lt=function(t){var e=this;this.selector&&void 0!==t||c("NO_SEL_OR_VAL");var r=this.data.filter(function(r){return n(r,e.selector,t)});return new u(r,this.selector)},u.prototype.gte=function(t){var e=this;this.selector&&void 0!==t||c("NO_SEL_OR_VAL");var n=this.data.filter(function(n){return r(n,e.selector,t)});return new u(n,this.selector)},u.prototype.lte=function(t){var e=this;this.selector&&void 0!==t||c("NO_SEL_OR_VAL");var r=this.data.filter(function(r){return i(r,e.selector,t)});return new u(r,this.selector)},u.prototype.range=function(t,e){var i,s,a,o=this;Array.isArray(t)&&2===t.length&&(i=[t[0],t[1]],t=i[0],e=i[1]),typeof(s=t)==typeof(a=e)&&("object"==typeof s&&s instanceof Date&&a instanceof Date||"number"==typeof s||"string"==typeof s)||c("RANGE_ARG"),this.selector||c("NO_SEL");var h=this.data.filter(function(e){return r(e,o.selector,t)}).filter(function(t){return n(t,o.selector,e)});return new u(h,this.selector)},u.prototype.includes=function(e){var r=this;if(this.selector||c("NO_SEL"),void 0===e)return this;var n=this.data.filter(function(n){var i=t(n,r.selector);return Array.isArray(i)&&i.includes(e)});return new u(n,this.selector)},u.prototype.any=function(t){var e=this;if(void 0===t&&(t={}),"object"!=typeof t||!Object.keys(t).length)return this;var r=this.data.filter(function(r){return e.__checkForAny(r,t)});return new u(r,this.selector)},u.prototype.all=function(t){var e=this;if(void 0===t&&(t={}),"object"!=typeof t||!Object.keys(t).length)return this;var r=this.data.filter(function(r){return e.__checkForAll(r,t)});return new u(r,this.selector)},u.prototype.sort=function(t){void 0===t&&(t={});var e=t.by,r=t.order;void 0===r&&(r="asc");var n=t.type,i=this.__findFirstOccurrence(e);return e&&i?("desc"!==r&&(r="asc"),n||(n=typeof i),this.selector=e,"asc"===r?this.asc(n):this.desc(n)):this},u.prototype.asc=function(e){if(this.selector||c("NO_SEL"),!this.data.length)return this;var r=[];e=e||this.__getType();var n=this.selector;switch(e){case"n":case"num":case"number":r=this.data.slice().sort(function(e,r){return t(e,n)-t(r,n)});break;case"string":case"str":case"s":r=this.data.slice().sort(function(e,r){return String(t(e,n)).localeCompare(String(t(r,n)))});break;case"date":case"d":r=this.data.slice().sort(function(e,r){return Number(new Date(t(e,n)))-Number(new Date(t(r,n)))});break;case"array":case"arr":r=this.data.slice().sort(function(e,r){var i=t(e,n),s=t(r,n);if(Array.isArray(i)&&Array.isArray(s))return i.length-s.length});break;default:return this}return new u(r,this.selector)},u.prototype.desc=function(e){if(this.selector||c("NO_SEL"),!this.data.length)return this;var r=[];e=e||this.__getType();var n=this.selector;switch(e){case"num":case"number":r=this.data.slice().sort(function(e,r){return t(r,n)-t(e,n)});break;case"str":case"string":r=this.data.slice().sort(function(e,r){return String(t(r,n)).localeCompare(String(t(e,n)))});break;case"date":r=this.data.slice().sort(function(e,r){return Number(new Date(t(r,n)))-Number(new Date(t(e,n)))});break;case"arr":case"array":r=this.data.slice().sort(function(e,r){var i=t(e,n),s=t(r,n);if(Array.isArray(i)&&Array.isArray(s))return s.length-i.length});break;default:return this}return new u(r,this.selector)},u.prototype.sum=function(e,r){return void 0===r&&(r=!0),this.__reset(),this.data.reduce(function(n,i){var s=t(i,e);return r?"number"==typeof s?n+s:n:isNaN(s)?n:n+Number(s)},0)},u.prototype.avg=function(e,r){void 0===r&&(r=!0),this.__reset();var n=0,i=0;return this.data.forEach(function(s){var a=t(s,e);r?"number"==typeof a&&(i++,n+=a):isNaN(a)||(i++,n+=Number(a))}),i?n/i:0},u.prototype.median=function(e,r){void 0===r&&(r=!0),this.__reset();var n=[];if(this.data.forEach(function(i){var s=t(i,e);r?"number"==typeof s&&n.push(s):isNaN(s)||n.push(Number(s))}),0===n.length)return 0;if(1===n.length)return n[0];n.sort(function(t,e){return t-e});var i=Math.floor(n.length/2);return n.length%2?n[i]:(n[i-1]+n[i])/2},u.prototype.values=function(){return this.__reset(),this.data.slice(0)},u.prototype.toArray=function(){return this.values()},u.prototype.__reset=function(){this.selector=""},u.prototype.__getType=function(e){if(void 0===e&&(e=this.selector),e)for(var r=0;r<this.data.length;r++){var n=t(this.data[r],e);if(n)return Array.isArray(n)?"array":typeof n}},u.prototype.__findFirstOccurrence=function(e){if(e)for(var r=0;r<this.data.length;r++){var n=t(this.data[r],e);if(n)return n}},u.prototype.__checkForAny=function(t,c){for(var u=0,h=Object.keys(c);u<h.length;u+=1){var f=h[u];switch(f){case"gt":if(e(t,this.selector,c[f]))return!0;break;case"gte":if(r(t,this.selector,c[f]))return!0;break;case"lt":if(n(t,this.selector,c[f]))return!0;break;case"lte":if(i(t,this.selector,c[f]))return!0;break;case"eq":if(s(t,this.selector,c[f]))return!0;break;case"not":if(a(t,this.selector,c[f]))return!0;break;case"is":if(c[f]===o(t,this.selector))return!0;break;case"range":if(Array.isArray(c[f])&&2===c[f].length&&r(t,this.selector,c[f][0])&&n(t,this.selector,c[f][1]))return!0}}},u.prototype.__checkForAll=function(t,c){for(var u=0,h=Object.keys(c);u<h.length;u+=1){var f=h[u];switch(f){case"gt":if(!e(t,this.selector,c[f]))return;break;case"gte":if(!r(t,this.selector,c[f]))return;break;case"lt":if(!n(t,this.selector,c[f]))return;break;case"lte":if(!i(t,this.selector,c[f]))return;break;case"eq":if(!s(t,this.selector,c[f]))return;break;case"not":if(!a(t,this.selector,c[f]))return;break;case"is":if(c[f]!==o(t,this.selector))return;break;case"range":if(Array.isArray(c[f])&&2===c[f].length&&(!r(t,this.selector,c[f][0])||!n(t,this.selector,c[f][1])))return}}return!0},Object.defineProperties(u.prototype,h),u});
//# sourceMappingURL=datafield.min.js.map
